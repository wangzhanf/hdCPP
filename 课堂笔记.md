# 讲师介绍：王占峰【技术】

# 班主任：    王瑞





# 课程概述：基于C++的图形界面【Qt】实训

## 小组形式完成【3-5人自由组合】

## 基于通用结构创建自己的业务

## 涉及知识体系：数据持久化--数据库    +    Qt框架   +   展示

## 学习过程：授课过程演示通用流程【借鉴】





# 课程资料：

## 1	授课过程：笔记 + 视频 + 演示代码+相关软件， 钉钉共享

## 2	提交资料（成绩构成）：



![image-20220822140218263](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220822140218263.png)



注意： 小组内部评分系统【基于贡献度】





# 1	项目的开发过程

## 1.1	什么是项目？ 路边摊是项目吗？

项目是为了得到某种独特产品、服务、成果而付出的临时的一次性努力。

## 1.2	项目的特点

临时性：所有的项目都有开始时间和结束时间，项目的目标就是追求结束。

独特性：没有完全相同的两个项目，项目资料只能借鉴不能直接使用。

渐进明细：远期粗略，近期详细。





## 1.3	项目如何管理

### 1.3.1	管理过程要符合基本流程PDCA

#### 1.3.1.1	P	Plan	计划：定宗旨，选标准，指导后续工作。

#### 1.3.1.2	D	Do	   做：    按计划执行

#### 1.3.1.3	CA  Check Action	检查处理：周期性和里程碑安排检查点。对比计划发现偏差，采取纠偏措施。

### 1.3.2	反复迭代PDCA的过程

### 1.3.3	权责清晰，符合RACI矩阵模式【一件工作只能一个负责人】

### 1.3.4	所有的成果都是可以验证的，持续优化过程

### 1.3.5	主要组成

#### 1.3.5.1	核心管理：范围管理，进度管理，成本管理，质量管理

#### 1.3.5.2	其他管理：需求管理，整体管理，团队管理，沟通管理，风险管理，合同管理



## 1.4	团队和沟通管理

### 1.4.1	什么是团队？什么是团伙？

拥有共同目标和美好期望，内部权责清晰，工作流程简单有效，成员明白自己对团队的贡献（工作依赖于其他成员的结果）

### 1.4.2	管理流程

#### 1.4.2.1	组建团队P：明确角色和职责，每个小组负责沟通和协调以及推进，专人负责【每个小组推荐Leader】

#### 1.4.2.2	建设团队D：优化团队

#### 1.4.2.3	管理团队CA：解决冲突



### 1.4.3	课堂实践【截止15：50】

#### 1.4.3.1	每个小组推选出一名Leader，明确推选理由

#### 1.4.3.2	每个小组建立自己的沟通群【常态化】

#### 1.4.3.3	每个小组提交leader名单，讨论视频【先放置在本地】，将授课讲师【我】加入到小组沟通群【建议用钉钉， 13898647536     ，    QQ   36529657】。



# 

# 项目技术架构

优先使用工具、库、框架  解决问题

工具： 可以辅助项目实现，简化工作流程【qmake编译，Git配置和版本管理】

库：     一套工具集，更加适配项目【String，STL】

框架： 一套解决方案，选择框架进行修饰【Qt】

设计模式和架构模式： 套路



复用：代码复用（CV法）-----》算法复用（逻辑）----》设计模式（思想）  -----》架构模式（整体平衡）

​																							观察者，MVC					分层架构



![image-20220822162407202](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220822162407202.png)





# Qt环境的搭建

安装Qt一般指Qt的开发环境：  

Qt重新封装的C++库 （Qt编程本质上就是对API接口的调用）

IDE开发工具： 图形化的集成开发环境  （Qt  Creator），包含了可视化界面设计器  Designer

编译环境：       一次编写可编译为不同平台可执行代码   

语言环境：	i18N    国际化

![image-20220823134206673](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220823134206673.png)



基本界面介绍

![image-20220823135652584](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220823135652584.png)



创建第一个项目，    选择   Widget  Application的图形界面

![image-20220823140142324](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220823140142324.png)

![image-20220823141025459](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220823141025459.png)





建议：   当项目目录转移到其他计算机或其他位置时，  应该删除其中的     pro.user   用户配置文件，在打开.pro文件时重新配置即可







# 项目结构

![image-20220823142619408](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220823142619408.png)







# 如何使用帮助

1	可以通过ui设计界面， 熟悉常见组件的所属类 

2	独立打开Qt助手获取帮助   

![image-20220823150717436](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220823150717436.png)



3	查阅关键字

![image-20220823151847874](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220823151847874.png)





## 数据类型

1	数值类型

Qt中对于部分数值进行了重新封装， 基于跨平台考量实现了重封装，typedef重定义

2	String字符串

3	容器类型【泛型数据结构】，具有弹性【可以参考学习标准C++的STL】

Qt对STL进行了重封装







# Git

Git是分布式版本管理工具

![image-20220824135043108](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824135043108.png)



## git如何使用

参考教程：   https://www.runoob.com/git/git-tutorial.html

1	安装

![image-20220824135327226](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824135327226.png)

2	git的工作流程

![image-20220824141125242](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824141125242.png)





![image-20220825133705383](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220825133705383.png)





3	分区的说明

![image-20220824141416627](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824141416627.png)





## Git用例

1	安装Git并进行配置

![image-20220824141720625](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824141720625.png)



2	在代码托管中心注册账号并登录， 设置SSH公钥

![image-20220824142241839](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824142241839.png)

![image-20220824142427992](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824142427992.png)



3	在代码托管中心创建一个仓库

![image-20220824142741092](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824142741092.png)

4	在本地运行git命令克隆远程仓库  【第一次】

![image-20220824143225250](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824143225250.png)

后续更新只需要使用  ：    git  pull  



5	修改工作区文件

![image-20220824145324608](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824145324608.png)

6	推送到远程仓库

![image-20220824145619668](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824145619668.png)

7	设置多人合作开发

![image-20220824150328940](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824150328940.png)



# Qt的组件

使用designer打开ui文件，  常见组件直接拉取到设计器【所见即所得】

![image-20220824152511992](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824152511992.png)



## 自定义一个组件

1	添加

![image-20220824152953282](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824152953282.png)



2	编辑组件内容

![image-20220824153342285](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220824153342285.png)

3	引入组件

 参照代码部分和视频部分





# 如何做到  异步编程

同步编程： 程序按照既定的路线和顺序执行

异步编程： 在某个特定情况发生时调用部分代码运行

Qt中的具体表现：  

​	回调函数方式

​	事件机制【大部分图形界面程序采用的方式】

​	信号和槽【事件的转换，降低事件机制的耦合度，通过观察者模式将将常见事件和事件处理函数进行绑定】

struct Student{

​		int age;

​      void printMe;

}s1,s2;

void func(struct Student s){	

​			......

}



s1.printMe = void(pf *)func(struct Student)；



## 事件

某种行为的发生，例如  鼠标点击，键盘输入，  关闭窗口  ， 网络请求结束

事件发生后采取具体的行动

​	1	忽略【什么也不做】

​	2	默认处理【按钮鼠标指向变色 ，输入框聚焦时光标闪烁 】

​	3	自定义处理【基于业务需求编写处理代码】



Qt中事件如何自定义处理：  覆写 事件函数即可  ，   事件本身对象会作为事件处理函数的第一个参数传递， 事件发生的细节会封装到事件对象【鼠标点击的坐标位置， 键盘按下的键】  





# 信号和槽

事件存在缺陷：  必须覆写实现，   业务代码需要编写在组件函数内， 耦合度过高



Qt的一种机制，对常见事件的再封装【按钮 最关注   点击】， 通过类似  观察者模式  进行低耦合调用

![image-20220825135911910](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220825135911910.png)





$("#mybtn").addEventListener("click",func1,true);

$("#mybtn").addEventListener("move",func2,true);



## 信号和槽关系



![image-20220825141018761](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220825141018761.png)





## 信号和槽的约束

1	信号是一个仿函数【带参】，只需要声明，不需要定义，放在  signals段【Qt宏伪装的private】，返回值为void

2	槽是一个函数【带参】，需要声明和定义，放在slots段【Qt宏伪装】 ，一般返回值为void

3	信号和槽通过QObject::connect()方法实现关联【注册、订阅】，通过QObject::disconnect()取消关联

4	信号的参数会从左到右依次自动填入槽的参量列表中，信号参数可以多于槽参数







## 信号和槽的实现

1	ui界面组件直接添加信号和槽关联【右键   转到槽】

2	使用connect方法进行绑定【Qt4的方式】

![image-20220825144504510](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220825144504510.png)

![image-20220825145608334](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220825145608334.png)

3	使用connect方法进行绑定【Qt5的方式，并且通过函数指针实现重载的识别】

4	信号可以关联到槽或信号， 槽中可以通过emit触发信号， 如果槽代码较为简单推荐使用lambda表达式





# Qt修饰

1	属性修改

2	布局管理器进行布局

3	引入外部资源实现美化

4	使用Qss样式进行修饰【阅读CSS样式】











# 后期安排

1	问题答疑【建议公屏提问】

2	参与小组讨论【小组讨论自行录像保存】

3	文档和阶段评审【开发文档】



![image-20220826134517025](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220826134517025.png)

![image-20220826134748778](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220826134748778.png)

# 项目实现和小组讨论..........



# 交付物

## 学校方面文档：

实习日记： 每人每天一篇，一页篇幅

实训报告：每人一篇，完整项目的叙述+ 自己负责部分详细描述



## 项目开发文档：

![image-20220829133712222](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220829133712222.png)

最终提交最终版本【  版本号  1.0 】，自行保留所有的历史版本



### 开发计划：



### 需求跟踪矩阵

通过了解用户的需求，分析解决需求的不一致和冲突，形成《需求规格说明书》，在用户的角度描述

![image-20220829140008316](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220829140008316.png)

### 概要设计：在开发的角度考虑

模块间  接口【方法和函数】   的设计    

![image-20220830142426275](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220830142426275.png)



### 单体测试书：

测试用例编写要比编码更早【**测试先行**】

合同【验收测试】，需求【系统测试】，概要设计【集成测试】，详细设计【单元测试】

预先规划测试用例，确保项目结果和预期一致。

![image-20220829141334788](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220829141334788.png)









# 代码调试

1	通过日志输出方式调试    qDebug()   【特别适合于函数调用，事件覆写（多态调用），信号和槽】

2	建议使用Debug调试

2.1	打断点

2.2	通过调试工具调试

![image-20220830134752400](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220830134752400.png)





# Qss进行修饰

一个应用应该是 统一风格  

1	添加qss作为资源文件

2	main中引入样式文件

![image-20220830141256688](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220830141256688.png)





# 变量



![image-20220830142035681](%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0.assets/image-20220830142035681.png)

























